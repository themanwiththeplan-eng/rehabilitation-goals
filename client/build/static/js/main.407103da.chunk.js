(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{104:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var a,c,r,s,i,o,l,d,j=n(0),u=n.n(j),b=n(20),m=n.n(b),h=(n(104),n(25)),g=n(86),O=n(88),x=n(155),p=n(157),v=n(151),f=n(37),w=n(8),y=n(160),k=n(4),N=function(e){var t=e.goals,n=e.title;return t?Object(k.jsxs)("div",{children:[Object(k.jsx)("h3",{children:n}),t&&t.map((function(e){return Object(k.jsxs)("div",{className:"card mb-3",children:[Object(k.jsxs)("h4",{className:"card-header bg-primary text-light p-2 m-0",children:[e.username," ",Object(k.jsx)("br",{}),Object(k.jsxs)("span",{style:{fontSize:"1rem"},children:["had this goal on ",e.createdAt]})]}),Object(k.jsx)("div",{className:"card-body bg-light p-2",children:Object(k.jsx)("p",{children:e.goalText})})]},e._id)}))]}):Object(k.jsx)("h3",{children:"No Thoughts Yet"})},S=n(13),T=n(18),$=n(26),_=n(10),C=n(145),A=n(39),W=n(156),I=Object(W.a)(a||(a=Object(A.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),L=Object(W.a)(c||(c=Object(A.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),q=Object(W.a)(r||(r=Object(A.a)(["\n  mutation addGoal($goalText: String!, $username: String!) {\n    addGoal(goalText: $goalText, username: $username) {\n      _id\n      goalText\n      createdAt\n      username\n    }\n  }\n"]))),E=(Object(W.a)(s||(s=Object(A.a)(["\n  query goals($username: String) {\n    goals(username: $username) {\n      _id\n      goalText\n      createdAt\n      username\n    }\n  }\n"]))),Object(W.a)(i||(i=Object(A.a)(["\n  query goal($id: ID!) {\n    goal(_id: $id) {\n      _id\n      goalText\n      createdAt\n      username\n    }\n  }\n"])))),G=(Object(W.a)(o||(o=Object(A.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      email\n      goals {\n        _id\n        goalText\n        createdAt\n      }\n    }\n  }\n"]))),Object(W.a)(l||(l=Object(A.a)(["\n  query me {\n    me {\n      _id\n      username\n      email\n\n      goals {\n        _id\n        goalText\n        createdAt\n      }\n    }\n  }\n"])))),R=(Object(W.a)(d||(d=Object(A.a)(["\n  query basic {\n    me {\n      _id\n      username\n      email\n    }\n  }\n"]))),function(){var e=Object(j.useState)({goalText:"",username:""}),t=Object(_.a)(e,2),n=t[0],a=t[1],c=Object(j.useState)(0),r=Object(_.a)(c,2),s=r[0],i=r[1],o=Object(C.a)(q),l=Object(_.a)(o,2),d=l[0],u=l[1].error,b=function(){var e=Object($.a)(Object(T.a)().mark((function e(t){var c;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,d({variables:{goalText:n.goalText,username:n.username}});case 5:c=e.sent,c.data,a({goalText:"",username:""}),window.location.assign("/profile"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){var t=e.target,c=t.name,r=t.value;"goalText"===c&&r.length<=280?(a(Object(h.a)(Object(h.a)({},n),{},Object(S.a)({},c,r))),i(r.length)):"goalText"!==c&&a(Object(h.a)(Object(h.a)({},n),{},Object(S.a)({},c,r)))};return Object(k.jsxs)("div",{children:[Object(k.jsx)("h3",{class:"Goalquestion",children:"What's on your techy mind?"}),Object(k.jsxs)("p",{className:"m-0 ".concat(280===s||u?"text-danger":""),style:{color:"grey"},children:["Character Count: ",s,"/280",u&&Object(k.jsx)("span",{className:"ml-2",children:"Something went wrong..."})]}),Object(k.jsxs)("form",{className:"flex-row justify-center justify-space-between-md align-center",onSubmit:b,children:[Object(k.jsx)("div",{className:"col-12",children:Object(k.jsx)("textarea",{name:"goalText",placeholder:"Here's a new goal...",value:n.goalString,className:"form-input w-100",style:{lineHeight:"1.5"},onChange:m})}),Object(k.jsx)("div",{className:"col-12 col-lg-9",children:Object(k.jsx)("input",{name:"username",placeholder:"Add your name to get credit for the goal...",value:n.username,className:"form-input w-100",onChange:m})}),Object(k.jsx)("div",{className:"col-12 col-lg-3",children:Object(k.jsx)("button",{className:"btn btn-primary btn-block py-3",type:"submit",children:"Add Goal"})}),u&&Object(k.jsx)("div",{className:"col-12 my-3 bg-danger text-white p-3",children:"Something went wrong..."})]})]})}),D=function(){var e,t=Object(y.a)(G),n=t.loading,a=t.data;console.log(a);var c=(null===a||void 0===a||null===(e=a.me)||void 0===e?void 0:e.goals)||[];return Object(k.jsx)("main",{children:Object(k.jsxs)("div",{className:"flex-row justify-center",children:[Object(k.jsx)("div",{className:"col-12 col-md-10 mb-3 p-3",style:{border:"1px dotted #1a1a1a"},children:Object(k.jsx)(R,{})}),Object(k.jsx)("div",{className:"col-12 col-md-8 mb-3",children:n?Object(k.jsx)("div",{children:"Loading..."}):Object(k.jsx)(N,{goals:c})})]})})},U=n(42),z=n(28),B=n(76),H=new(function(){function e(){Object(U.a)(this,e)}return Object(z.a)(e,[{key:"getProfile",value:function(){return Object(B.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(B.a)(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),M=n(152),P=n(147),F=n(158),J=n(154),Y=function(e){var t=Object(j.useState)({email:"",password:""}),n=Object(_.a)(t,2),a=n[0],c=n[1],r=Object(C.a)(I),s=Object(_.a)(r,2),i=s[0],o=(s[1].error,function(e){var t=e.target,n=t.name,r=t.value;c(Object(h.a)(Object(h.a)({},a),{},Object(S.a)({},n,r)))}),l=function(){var e=Object($.a)(Object(T.a)().mark((function e(t){var n,r;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,i({variables:Object(h.a)({},a)});case 4:n=e.sent,r=n.data,console.log(r),H.login(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:c({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(P.a,{maxWidth:"xs",children:[Object(k.jsx)("h2",{id:"login-h2",children:"Login"}),Object(k.jsxs)("form",{onSubmit:l,children:[Object(k.jsx)(J.a,{mb:2,children:Object(k.jsx)(M.a,{name:"email",onChange:o,variant:"outlined",label:"email",fullWidth:!0,autoComplete:"email",value:a.email})}),Object(k.jsx)(J.a,{mb:2,children:Object(k.jsx)(M.a,{name:"password",onChange:o,type:"password",variant:"outlined",label:"password",fullWidth:!0,value:a.password})}),Object(k.jsx)(F.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Login"})]})]})},K=function(){var e=Object(j.useState)({username:"",email:"",password:""}),t=Object(_.a)(e,2),n=t[0],a=t[1],c=Object(C.a)(L),r=Object(_.a)(c,2),s=r[0],i=r[1].error,o=function(e){var t=e.target,c=t.name,r=t.value;a(Object(h.a)(Object(h.a)({},n),{},Object(S.a)({},c,r)))},l=function(){var e=Object($.a)(Object(T.a)().mark((function e(t){var a,c;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,s({variables:Object(h.a)({},n)});case 4:a=e.sent,c=a.data,H.login(c.addUser.token),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(k.jsx)("div",{className:"col-12 col-md-6",children:Object(k.jsxs)("div",{className:"card",children:[Object(k.jsx)("h4",{className:"card-header",children:"Register"}),Object(k.jsxs)("div",{className:"card-body",children:[Object(k.jsxs)("form",{onSubmit:l,children:[Object(k.jsx)("input",{className:"form-input",placeholder:"Enter your username",name:"username",type:"username",id:"username",value:n.username,onChange:o}),Object(k.jsx)("input",{className:"form-input",placeholder:"Enter your email",name:"email",type:"email",id:"email",value:n.email,onChange:o}),Object(k.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",id:"password",value:n.password,onChange:o}),Object(k.jsx)("button",{className:"btn d-block w-100",type:"submit",children:"Submit"})]}),i&&Object(k.jsx)("div",{children:"Sign up failed..."})]})]})})})},Q=function(){var e=Object(w.k)().goalId,t=Object(y.a)(E,{variables:{goalId:e}}),n=t.loading,a=t.data,c=(null===a||void 0===a?void 0:a.goal)||{};return n?Object(k.jsx)("div",{children:"Loading..."}):Object(k.jsxs)("div",{className:"my-3",children:[Object(k.jsxs)("h3",{className:"card-header bg-dark text-light p-2 m-0",children:[c.user," ",Object(k.jsx)("br",{}),Object(k.jsxs)("span",{style:{fontSize:"1rem"},children:["had this thought on ",c.createdAt]})]}),Object(k.jsx)("div",{className:"bg-light py-4",children:Object(k.jsx)("blockquote",{className:"p-4",style:{fontSize:"1.5rem",fontStyle:"italic",border:"2px dotted #1a1a1a",lineHeight:"1.5"},children:c.text})})]})},V=function(){return Object(k.jsx)("header",{className:"bg-secondary mb-4 py-2 flex-row align-center",children:Object(k.jsxs)("div",{className:"container flex-row justify-space-between-lg justify-center align-center",children:[Object(k.jsx)(f.b,{to:"/",children:Object(k.jsx)("h1",{children:"Rehabilitation Goals"})}),Object(k.jsx)("p",{className:"m-0",children:Object(k.jsx)("em",{children:"Let's help people get better!"})}),Object(k.jsx)("nav",{className:"text-center",children:H.loggedIn()?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(f.b,{to:"/profile",children:"Me"}),Object(k.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),H.logout()},children:"Logout"})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(f.b,{to:"/login",children:Object(k.jsx)("strong",{children:"Login"})}),Object(k.jsx)(f.b,{to:"/signup",children:Object(k.jsx)("strong",{children:"Register"})})]})})]})})},X=function(){var e=Object(w.h)(),t=Object(w.j)();return Object(k.jsx)("footer",{className:"w-100 mt-auto bg-secondary ",children:Object(k.jsxs)("div",{className:"container text-center mb-4",children:["/"!==e.pathname&&Object(k.jsx)("button",{className:" btn-dark mb-auto",onClick:function(){return t(-1)},children:"\u2190 Go Back"}),Object(k.jsxs)("h6",{children:["Made with"," ",Object(k.jsx)("span",{className:"emoji",role:"img","aria-label":"heart","aria-hidden":"false",children:"\u2764\ufe0f"})," ","by the Rehab Goals Team."]})]})})},Z=Object(O.a)({uri:"/graphql"}),ee=Object(g.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(h.a)(Object(h.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),te=new x.a({link:ee.concat(Z),cache:new p.a});var ne=function(){return Object(k.jsx)(v.a,{client:te,children:Object(k.jsx)(f.a,{children:Object(k.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(k.jsx)(V,{}),Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)(w.c,{children:[Object(k.jsx)(w.a,{path:"/",element:Object(k.jsx)(D,{})}),Object(k.jsx)(w.a,{path:"/login",element:Object(k.jsx)(Y,{})}),Object(k.jsx)(w.a,{path:"/signup",element:Object(k.jsx)(K,{})}),Object(k.jsx)(w.a,{path:"/goals/:goalId",element:Object(k.jsx)(Q,{})})]})}),Object(k.jsx)(X,{})]})})})},ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}m.a.render(Object(k.jsx)(u.a.StrictMode,{children:Object(k.jsx)(ne,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ce(t,e)}))}}()}},[[110,1,2]]]);
//# sourceMappingURL=main.407103da.chunk.js.map